{% extends "base.html" %}

{% block title %}Dashboard - Inventory Management System{% endblock %}

{% block content %}
<h1>Dashboard</h1>

<!-- Statistics -->
<div class="stats-grid">
    <div class="stat-card">
        <h3>Total Products</h3>
        <h2>{{ total_products }}</h2>
    </div>
    <div class="stat-card">
        <h3>Total Locations</h3>
        <h2>{{ total_locations }}</h2>
    </div>
    <div class="stat-card">
        <h3>Total Movements</h3>
        <h2>{{ total_movements }}</h2>
    </div>
</div>

<!-- Quick Actions -->
<div class="card">
    <h3>Quick Actions</h3>
    <p>
        <a href="{{ url_for('add_product') }}" class="btn btn-success">Add Product</a>
        <a href="{{ url_for('add_location') }}" class="btn btn-success">Add Location</a>
        <a href="{{ url_for('add_movement') }}" class="btn btn-warning">Record Movement</a>
        <a href="{{ url_for('report') }}" class="btn">View Report</a>
    </p>
</div>

<!-- Recent Movements -->
<div class="card">
    <h3>Recent Movements</h3>
    
    {% if recent_movements %}
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Product</th>
                    <th>Type</th>
                    <th>From</th>
                    <th>To</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody>
                {% for movement in recent_movements %}
                <tr>
                    <td>{{ movement.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
                    <td>
                        <strong>{{ movement.product.name }}</strong><br>
                        <small>{{ movement.product_id }}</small>
                    </td>
                    <td>
                        {% if movement.movement_type == 'Stock In' %}
                            <span class="badge badge-success">{{ movement.movement_type }}</span>
                        {% elif movement.movement_type == 'Stock Out' %}
                            <span class="badge badge-danger">{{ movement.movement_type }}</span>
                        {% else %}
                            <span class="badge badge-info">{{ movement.movement_type }}</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if movement.from_location %}
                            <strong>{{ movement.from_loc.name }}</strong><br>
                            <small>{{ movement.from_location }}</small>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>
                        {% if movement.to_location %}
                            <strong>{{ movement.to_loc.name }}</strong><br>
                            <small>{{ movement.to_location }}</small>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td><strong>{{ movement.qty }}</strong></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <p class="text-center">
            <a href="{{ url_for('movements') }}" class="btn">View All Movements</a>
        </p>
    {% else %}
        <div class="empty-state">
            <h3>No movements recorded yet</h3>
            <p>Start by adding some products and locations, then record your first movement.</p>
            <a href="{{ url_for('add_movement') }}" class="btn btn-success">Record First Movement</a>
        </div>
    {% endif %}
</div>
{% endblock %}
